<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta name="format-detection" content="telephone=no">
      <meta name="msapplication-tap-highlight" content="no">
      <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
      <link rel="stylesheet" href="css/fontawesome.css">
      <link rel="stylesheet" href="css/solid.css">
      <link rel="stylesheet" href="css/bootstrap.css">
      <link rel="stylesheet" href="css/index.css">
      <script src="cordova.js"></script>
  </head>
  <body class="bg-light">
    <!-- Barra superior -->
    <div class="sticky-top bg-primary d-flex p-2">
      <div class="col-6">
        <p class="m-2 h4" id="calendario"></p>
      </div>
      <div class="text-end col-6">
        <i class="fa-solid fa-calendar m-2 h4"></i>
        <i class="fa-solid fa-gear m-2 h4"></i>
      </div>
    </div>
    <!-- Fin barra superior -->

    <!-- Modal agregar series -->
    <div class="modal fade" id="modalCSet" tabindex="-1" aria-labelledby="modalCSetLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <div>
                <h1 id="titulo" class="modal-title fs-5"></h1>
                <h6 id="subtitulo" class="modal-title"></h6>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="input-group flex-nowrap mb-3">
              <span class="input-group-text">KG</span>
              <input type="number" class="form-control" id="valor1">
            </div>
            <div class="input-group flex-nowrap mb-3">
              <span class="input-group-text">REP</span>
              <input type="number" class="form-control" id="valor2">
            </div>
            <div class="btn-group-sm text-center form-group">
              <input type="radio" class="btn-check btn-calentamiento" name="dificultad" id="calentamiento" value="1">
              <label class="btn btn-calentamiento" for="calentamiento">Calentamiento</label>
  
              <input type="radio" class="btn-check btn-facil" name="dificultad" id="facil" value="2">
              <label class="btn btn-facil" for="facil">Fácil</label>
  
              <input type="radio" class="btn-check btn-normal" name="dificultad" id="normal" value="3">
              <label class="btn btn-normal" for="normal">Normal</label>
  
              <input type="radio" class="btn-check btn-dificil" name="dificultad" id="dificil" value="4">
              <label class="btn btn-dificil" for="dificil">Difícil</label>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-primary" id="btnSubmit" onclick="crearSet()">Guardar</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Fin modal -->

    <!-- Modal editar serie -->
    <div class="modal fade" id="modalUSet" tabindex="-1" aria-labelledby="modalUSetLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
            <div class="modal-header">
                <div>
                    <h1 id="titulo" class="modal-title fs-5"></h1>
                    <h6 id="subtitulo" class="modal-title"></h6>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="input-group flex-nowrap mb-3">
                <span class="input-group-text">KG</span>
                <input type="number" class="form-control" id="valor1">
                </div>
                <div class="input-group flex-nowrap mb-3">
                <span class="input-group-text">REP</span>
                <input type="number" class="form-control" id="valor2">
                </div>
                <div class="btn-group-sm text-center form-group">
                <input type="radio" class="btn-check btn-calentamiento" name="dificultad" id="calentamientoE" value="1">
                <label class="btn btn-calentamiento" for="calentamientoE">Calentamiento</label>

                <input type="radio" class="btn-check btn-facil" name="dificultad" id="facilE" value="2">
                <label class="btn btn-facil" for="facilE">Fácil</label>

                <input type="radio" class="btn-check btn-normal" name="dificultad" id="normalE" value="3">
                <label class="btn btn-normal" for="normalE">Normal</label>

                <input type="radio" class="btn-check btn-dificil" name="dificultad" id="dificilE" value="4">
                <label class="btn btn-dificil" for="dificilE">Difícil</label>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-primary"><i class="fas fa-trash-can"></i></button>
                <div>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnSubmit" onclick="editarSet()">Actualizar</button>
                </div>
            </div>
            </div>
        </div>
        </div>
        <!-- Fin modal -->

    <!-- Ejercicios -->
    <div id="ejercicios" class="mb-5">
      <!-- Ejercicio -->
      <div class="px-4 my-2">
        <div class="bg-white rounded shadow-sm p-3 row">
            <div class="col-4">
                <img class="rounded-circle shadow img-fluid" src="img/ejercicios/sentadilla_libre.gif" />
            </div>
            <div class="col-8">
                <div class="row">
                    <div class="col-10">
                        <p><strong><u>Sentadilla libre</u></strong></p>
                    </div>
                    <div class="col-2">
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </div>
                </div>
                <div class="row text-center">
                    <div data-bs-toggle="modal" data-bs-target="#modalUSet" data-bs-ejercicio="1" data-bs-nset="1"class="col-3 d-flex flex-column justify-content-center">
                        <div class="h-25 bg-calentamiento rounded-pill"></div>
                        <p>20KG</p>
                        <p>12REP</p>
                    </div>
                    <div data-bs-toggle="modal" data-bs-target="#modalUSet" data-bs-ejercicio="1" data-bs-nset="2"class="col-3 d-flex flex-column justify-content-center">
                        <div class="py-1 h-25 bg-facil rounded-pill"></div>
                        <p>60KG</p>
                        <p>10REP</p>
                    </div>
                    <div data-bs-toggle="modal" data-bs-target="#modalUSet" data-bs-ejercicio="1" data-bs-nset="3"class="col-3 d-flex flex-column justify-content-center">
                        <div class="py-1 h-25 bg-normal rounded-pill"></div>
                        <p>80KG</p>
                        <p>8REP</p>
                    </div>
                    <div data-bs-toggle="modal" data-bs-target="#modalUSet" data-bs-ejercicio="1" data-bs-nset="4" class="col-3 d-flex flex-column justify-content-center">
                        <div class="py-1 h-25 bg-dificil rounded-pill"></div>
                        <p>100KG</p>
                        <p>8REP</p>
                    </div>
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <button data-bs-toggle="modal" data-bs-target="#modalCSet" data-bs-ejercicio="1" data-bs-nset="1" class="btn"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
            </div>
        </div>
      </div>
      <!-- Fin ejercicio -->
      <!-- Ejercicio -->
      <div class="px-4 my-2">
        <div class="bg-white rounded shadow-sm p-3 row">
            <div class="col-4">
                <img class="rounded-circle shadow img-fluid" src="img/ejercicios/peso_muerto.gif" />
            </div>
            <div class="col-8">
                <div class="row">
                    <div class="col-10">
                        <p><strong><u>Peso muerto</u></strong></p>
                    </div>
                    <div class="col-2">
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </div>
                </div>
                <div class="row text-center">
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <div class="h-25 bg-calentamiento rounded-pill"></div>
                        <p>20KG</p>
                        <p>12REP</p>
                    </div>
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <div class="py-1 h-25 bg-facil rounded-pill"></div>
                        <p>60KG</p>
                        <p>10REP</p>
                    </div>
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <div class="py-1 h-25 bg-normal rounded-pill"></div>
                        <p>80KG</p>
                        <p>8REP</p>
                    </div>
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <div class="py-1 h-25 bg-dificil rounded-pill"></div>
                        <p>100KG</p>
                        <p>8REP</p>
                    </div>
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <button data-bs-toggle="modal" data-bs-target="#modalCSet" data-bs-ejercicio="2" data-bs-nset="3" class="btn"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
            </div>
        </div>
      </div>
      <!-- Fin ejercicio -->
      <!-- Ejercicio -->
      <div class="px-4 my-2">
        <div class="bg-white rounded shadow-sm p-3 row">
            <div class="col-4">
                <img class="rounded-circle shadow img-fluid" src="img/ejercicios/press_banca_barra.gif" />
            </div>
            <div class="col-8">
                <div class="row">
                    <div class="col-10">
                        <p><strong><u>Press banca</u></strong></p>
                    </div>
                    <div class="col-2">
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </div>
                </div>
                <div class="row text-center">
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <div class="h-25 bg-calentamiento rounded-pill"></div>
                        <p>20KG</p>
                        <p>12REP</p>
                    </div>
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <div class="py-1 h-25 bg-facil rounded-pill"></div>
                        <p>60KG</p>
                        <p>10REP</p>
                    </div>
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <div class="py-1 h-25 bg-normal rounded-pill"></div>
                        <p>80KG</p>
                        <p>8REP</p>
                    </div>
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <div class="py-1 h-25 bg-dificil rounded-pill"></div>
                        <p>100KG</p>
                        <p>8REP</p>
                    </div>
                    <div class="col-3 d-flex flex-column justify-content-center">
                        <button data-bs-toggle="modal" data-bs-target="#modalCSet" data-bs-ejercicio="3" data-bs-nset="5" class="btn"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
            </div>
        </div>
      </div>
      <!-- Fin ejercicio -->                             
    </div>
    <!-- Fin de ejercicios -->

    <!-- Barra inferior -->
    <div class="align-items-center mh-45px fixed-bottom bg-primary p-2 d-flex justify-content-around" w3-include-html="footer.html"></div>
    <script src="js/footer.js"></script>
    <script>includeHTML();</script>
    <!-- Fin  barra inferior -->
  
    <script src="js/bootstrap.js"></script>
    <script src="js/bootstrap.bundle.js"></script>
    <script src="js/db.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script>
        document.addEventListener('deviceready', async function() {
            const db = conexion();
            await crearTablas(db);
            const calendario = await getCalendario(db);
            let nombre_calendario = calendario.rows.item(0).nombre;
            let color_calendario = calendario.rows.item(0).color;
            $("#calendario").text(nombre_calendario);
            const modalCSet = document.getElementById('modalCSet')
            modalCSet.addEventListener('show.bs.modal', async event => {
                const boton = event.relatedTarget
                let nset = boton.getAttribute('data-bs-nset')
                let id_ejercicio = boton.getAttribute('data-bs-ejercicio')
                let ejercicio = await getEjercicios(db,`WHERE ID = ${id_ejercicio}`);
                const titulo = modalCSet.querySelector('#titulo')
                const subtitulo = modalCSet.querySelector('#subtitulo')
                titulo.textContent = 'Set Nº ' + nset
                subtitulo.textContent = ejercicio.rows.item(0).nombre;
            })
            const modalUSet = document.getElementById('modalUSet')
            modalUSet.addEventListener('show.bs.modal', async event => {
                const boton = event.relatedTarget
                let nset = boton.getAttribute('data-bs-nset')
                let id_ejercicio = boton.getAttribute('data-bs-ejercicio')
                let ejercicio = await getEjercicios(db,`WHERE ID = ${id_ejercicio}`);
                const titulo = modalUSet.querySelector('#titulo')
                const subtitulo = modalUSet.querySelector('#subtitulo')
                titulo.textContent = 'Edición set Nº ' + nset
                subtitulo.textContent = ejercicio.rows.item(0).nombre;
            })
        })
        function crearSet(){
            let valor1 = $("#valor1").val()
            let valor2 = $("#valor2").val()
            let dificultad = $("input[name='dificultad']:checked").val()
            console.log("KGS: " + valor1)
            console.log("Repes: " + valor2)
            console.log("Dificultad: " + dificultad)
            // $("#modalCSet").modal("hide");
        }
    </script>
  </body>
</html>